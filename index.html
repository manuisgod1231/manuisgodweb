<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Manu Web</title>
  <style>
    body { font-family: sans-serif; background: #111; color: #fff; text-align: center; }
    .hidden { display: none; }
    .box { background: #222; padding: 20px; border-radius: 10px; margin: 20px auto; width: 300px; }
    input, button { padding: 10px; margin: 5px; border-radius: 5px; border: none; }
    #moneyDisplay { position: fixed; top: 10px; left: 10px; font-weight: bold; font-size: 18px; }
    #profileBtn { position: fixed; top: 10px; right: 10px; }
    #profileBox { position: fixed; top: 50px; right: 10px; background: #333; padding: 15px; border-radius: 10px; }
  </style>
</head>
<body>

<div id="moneyDisplay" class="hidden">üí∞ Money: $0</div>

<div class="box" id="loginBox">
  <h2>Login</h2>
  <input id="loginUser" placeholder="Username"><br>
  <input id="loginPass" type="password" placeholder="Password"><br>
  <button onclick="login()">Login</button>
  <button onclick="toggleCreate()">Create Account</button>
</div>

<div class="box hidden" id="createBox">
  <h2>Create Account</h2>
  <input id="createUser" placeholder="Username"><br>
  <input id="createPass" type="password" placeholder="Password"><br>
  <button onclick="createAccount()">Create</button>
  <button onclick="toggleCreate()">Back to Login</button>
</div>

<div class="box hidden" id="mainUI">
  <h2>Welcome, <span id="displayUser"></span>!</h2>
  <button id="profileBtn" onclick="toggleProfile()">üë§ Profile</button>
</div>

<div id="profileBox" class="hidden">
  <h3>Profile</h3>
  <button onclick="logout()">Logout</button>
  <div id="ownerPanel" class="hidden">
    <h4>Owner Panel</h4>
    <input type="text" id="giveMoneyUser" placeholder="üéØ Target Username"><br>
    <input type="number" id="giveMoneyAmount" placeholder="üíµ Amount"><br>
    <button onclick="giveMoney()">Give Money</button><br><br>
    <pre id="accountsList"></pre>
  </div>
</div>

<script>
let accounts = JSON.parse(localStorage.getItem("accounts")) || {
  "manyu": { password: "Manuufo25252265", money: 1000 }
};
let currentUser = null;

function toggleCreate() {
  document.getElementById("loginBox").classList.toggle("hidden");
  document.getElementById("createBox").classList.toggle("hidden");
}

function login() {
  const user = document.getElementById("loginUser").value.trim();
  const pass = document.getElementById("loginPass").value;

  if (accounts[user] && accounts[user].password === pass) {
    currentUser = user;
    showMainUI();
  } else {
    alert("‚ùå Invalid credentials");
  }
}

function createAccount() {
  const user = document.getElementById("createUser").value.trim();
  const pass = document.getElementById("createPass").value;

  if (!user || !pass) return alert("‚ö†Ô∏è Please fill in all fields.");
  if (accounts[user]) return alert("‚ö†Ô∏è Username already exists.");

  accounts[user] = { password: pass, money: 500 };
  saveAccounts();
  alert("‚úÖ Account created!");
  toggleCreate();
}

function showMainUI() {
  document.getElementById("loginBox").classList.add("hidden");
  document.getElementById("createBox").classList.add("hidden");
  document.getElementById("mainUI").classList.remove("hidden");
  document.getElementById("moneyDisplay").classList.remove("hidden");

  document.getElementById("displayUser").textContent = currentUser;
  updateMoneyDisplay();

  if (currentUser === "manyu") {
    document.getElementById("ownerPanel").classList.remove("hidden");
    updateAccountsList();
  } else {
    document.getElementById("ownerPanel").classList.add("hidden");
  }
}

function logout() {
  currentUser = null;
  document.getElementById("mainUI").classList.add("hidden");
  document.getElementById("moneyDisplay").classList.add("hidden");
  document.getElementById("profileBox").classList.add("hidden");
  document.getElementById("loginBox").classList.remove("hidden");
}

function toggleProfile() {
  document.getElementById("profileBox").classList.toggle("hidden");
}

function giveMoney() {
  const targetUser = document.getElementById("giveMoneyUser").value.trim();
  const amount = parseInt(document.getElementById("giveMoneyAmount").value.trim());

  if (!targetUser || isNaN(amount) || amount <= 0) {
    alert("‚ö†Ô∏è Invalid user or amount.");
    return;
  }

  if (!accounts[targetUser]) {
    alert("‚ùå User not found.");
    return;
  }

  if (accounts[currentUser].money < amount) {
    alert("üí∏ Not enough money.");
    return;
  }

  accounts[currentUser].money -= amount;
  accounts[targetUser].money += amount;

  saveAccounts();
  updateMoneyDisplay();
  updateAccountsList();
  alert(`‚úÖ Gave $${amount} to ${targetUser}`);
}

function saveAccounts() {
  localStorage.setItem("accounts", JSON.stringify(accounts));
}

function updateMoneyDisplay() {
  if (currentUser && accounts[currentUser]) {
    document.getElementById("moneyDisplay").textContent = `üí∞ Money: $${accounts[currentUser].money}`;
  }
}

function updateAccountsList() {
  const list = Object.entries(accounts)
    .map(([user, acc]) => `‚Ä¢ ${user}: $${acc.money ?? 0}`)
    .join("\n");
  document.getElementById("accountsList").textContent = list;
}
</script>

</body>
</html>
