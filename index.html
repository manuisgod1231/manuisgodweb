<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡πÄ‡∏ß‡πá‡∏õ/‡πÅ‡∏≠‡∏õ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô</title>
<meta name="theme-color" content="#4CAF50">
<style>
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  margin:0; padding:20px;
  display:flex; justify-content:center;
  background: linear-gradient(to bottom right, #f0f4f8, #d9e2ec);
  color:#000;
}
.container {
  width:95%; max-width:720px; background:#fff; padding:25px 30px; border-radius:20px;
  box-shadow:0 10px 30px rgba(0,0,0,0.12); transition: all 0.3s ease;
}
h2 {text-align:center; color:#2c3e50; margin-top:0;}
.language-select {text-align:right; margin-bottom:15px;}
details {margin:15px 0; border-radius:12px; padding:12px; background:#f9fafc; box-shadow:0 2px 8px rgba(0,0,0,0.08);}
details summary {font-weight:600; font-size:16px; cursor:pointer; color:#34495e;}
.input-row {display:flex; flex-wrap:wrap; gap:12px; margin-top:10px;}
.input-row input, .input-row select {flex:1; padding:10px 12px; border:1px solid #ccd6dd; border-radius:10px; font-size:14px; transition:0.2s;}
.input-row input:focus, .input-row select:focus {border-color:#4CAF50; outline:none; box-shadow:0 0 6px rgba(76,175,80,0.3);}
button {padding:10px 18px; margin-top:12px; cursor:pointer; border:none; border-radius:12px; background:#4CAF50; color:white; font-weight:600; font-size:15px; transition:0.2s;}
button:hover {background:#45a049;}
#result {margin-top:20px; padding:20px; border-radius:16px; background:#e8f5e9; border:1px solid #a5d6a7; font-weight:500; line-height:1.6;}

/* ‡πÇ‡∏´‡∏°‡∏î‡∏°‡∏∑‡∏î */
body.dark {
  background: linear-gradient(to bottom right, #1c1c1c, #2c2c2c);
  color:#fff;
}
body.dark .container {
  background:#2c2c2c;
  box-shadow:0 10px 30px rgba(0,0,0,0.5);
  color:#fff;
}
body.dark h2 { color:#fff; }
body.dark input, body.dark select {
  background:#444;
  color:#fff;
  border:1px solid #555;
}
body.dark button {
  background:#555;
  color:#fff;
}
body.dark button:hover {background:#777;}
body.dark details {
  background:#333; 
  box-shadow:0 2px 8px rgba(0,0,0,0.6); 
  color:#fff;
}
body.dark details summary {color:#fff;}
body.dark #result {
  background:#333; 
  border:1px solid #555; 
  color:#fff;
}
</style>
</head>
<body>

<div class="container" id="appContent">
  <div class="language-select">
    <select id="langSelect">
      <option value="th">‡πÑ‡∏ó‡∏¢</option>
      <option value="en">English</option>
    </select>
    <button onclick="toggleDarkMode()">üåô/‚òÄÔ∏è</button>
  </div>

  <h2 id="title">üìä ‡πÄ‡∏ß‡πá‡∏õ/‡πÅ‡∏≠‡∏õ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô</h2>

  <details open>
    <summary id="labelMaterial">ü•¶ ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö</summary>
    <div id="materials"></div>
    <button onclick="addMaterial()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö</button>
  </details>

  <details>
    <summary id="labelLabor">üíº ‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á & ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢</summary>
    <div class="input-row">
      <input type="number" id="workers" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô">
      <input type="number" id="wage" placeholder="‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á‡∏ï‡πà‡∏≠‡∏Ñ‡∏ô">
    </div>
    <div class="input-row">
      <input type="number" id="water" placeholder="‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥">
      <input type="number" id="electricity" placeholder="‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü">
    </div>
  </details>

  <details>
    <summary id="labelProfit">üí∞ ‡∏Å‡∏≥‡πÑ‡∏£</summary>
    <div class="input-row">
      <input type="number" id="profit" placeholder="‡∏Å‡∏≥‡πÑ‡∏£ %">
      <select id="profitType">
        <option value="day">‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</option>
        <option value="month" selected>‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</option>
        <option value="year">‡∏£‡∏≤‡∏¢‡∏õ‡∏µ</option>
      </select>
      <input type="number" id="duration" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (‡∏ß‡∏±‡∏ô/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô/‡∏õ‡∏µ)">
    </div>
  </details>

  <button onclick="calculate()" id="calcBtn">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
  <div id="result"></div>
</div>

<script>
let materialCount = 0;

// toggle ‡πÇ‡∏´‡∏°‡∏î‡∏°‡∏∑‡∏î
function toggleDarkMode(){
  document.body.classList.toggle("dark");
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö
function addMaterial(name="", qty="", cost=""){
  materialCount++;
  const div = document.createElement("div");
  div.className = "input-row";
  div.id = "material-" + materialCount;
  div.innerHTML = `
    <input type="text" placeholder="Material name" value="${name}">
    <input type="number" placeholder="Qty" value="${qty}">
    <input type="number" placeholder="Cost (unit)" value="${cost}">
    <button onclick="toggleLock(${materialCount})">üîí</button>
    <button onclick="deleteMaterial(${materialCount})">‚ùå</button>
  `;
  document.getElementById("materials").appendChild(div);
}

function deleteMaterial(id){document.getElementById("material-"+id).remove();}
function toggleLock(id){
  const div=document.getElementById("material-"+id);
  const inputs=div.getElementsByTagName("input");
  const lockBtn = div.getElementsByTagName("button")[0];
  const locked = inputs[0].disabled;
  for (let i=0; i<3; i++){inputs[i].disabled=!locked;}
  lockBtn.textContent = locked ? "üîí" : "üîì";
}

// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
function calculate(){
  const workers = parseFloat(document.getElementById("workers").value)||0;
  const wage = parseFloat(document.getElementById("wage").value)||0;
  const water = parseFloat(document.getElementById("water").value)||0;
  const electricity = parseFloat(document.getElementById("electricity").value)||0;
  const profit = parseFloat(document.getElementById("profit").value)||0;
  const profitType = document.getElementById("profitType").value;
  const duration = parseFloat(document.getElementById("duration").value)||1;

  let materialCost=0;
  document.querySelectorAll("#materials .input-row").forEach(row=>{
    const qty=parseFloat(row.children[1].value)||0;
    const cost=parseFloat(row.children[2].value)||0;
    materialCost += qty * cost;
  });

  const laborCost=workers*wage;
  const otherCost=water+electricity;
  const totalCost=laborCost+otherCost+materialCost;

  let profitTotal="";
  if (profit>0 && materialCost>0) {
    profitTotal = totalCost*(profit/100)*duration;
  }

  document.getElementById("result").innerHTML=`
    üíº ‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á‡∏£‡∏ß‡∏°: ${laborCost}<br>
    üíß ‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥ + ‚ö° ‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü: ${otherCost}<br>
    ü•¶ ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö: ${materialCost}<br>
    üìä ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏£‡∏ß‡∏°: ${totalCost}<br>
    ${profitTotal!==""?`üí∞ ‡∏Å‡∏≥‡πÑ‡∏£ (${profit}% / ${profitType}): ${profitTotal}`:""}
  `;
}
</script>
</body>
</html>
