<!DOCTYPE html>
<html>
<head>
  <title>ManuisGod Web</title>
  <style>
    body {
      font-family: Arial;
      background: #111;
      color: #fff;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    .hidden { display: none; }
    #moneyDisplay {
      position: absolute;
      top: 10px;
      left: 10px;
      background: #222;
      padding: 5px 10px;
      border-radius: 10px;
    }
    #profileBtn {
      position: absolute;
      top: 10px;
      right: 10px;
    }
    #ownerPanel, #profileUI, #loginUI, #createUI {
      margin-top: 20px;
    }
    input {
      padding: 5px;
      margin: 5px;
    }
    button {
      padding: 6px 12px;
      margin: 5px;
    }
  </style>
</head>
<body>

<h1>Welcome to ManuisGod Web</h1>

<div id="homeUI">
  <button onclick="showLogin()">Login</button>
  <button onclick="showCreate()">Create Account</button>
</div>

<div id="loginUI" class="hidden">
  <h2>Login</h2>
  <input id="loginUsername" placeholder="Username"><br>
  <input id="loginPassword" placeholder="Password" type="password"><br>
  <button onclick="login()">Login</button>
  <button onclick="backToHome()">Back</button>
</div>

<div id="createUI" class="hidden">
  <h2>Create Account</h2>
  <input id="createUsername" placeholder="Username"><br>
  <input id="createPassword" placeholder="Password" type="password"><br>
  <button onclick="createAccount()">Create</button>
  <button onclick="backToHome()">Back</button>
</div>

<div id="moneyDisplay" class="hidden">üí∞ Money: $0</div>
<button id="profileBtn" class="hidden" onclick="toggleProfile()">Profile</button>

<div id="profileUI" class="hidden">
  <h2>Profile</h2>
  <p id="profileName"></p>
  <button onclick="toggleOwnerPanel()">Toggle Owner Panel</button>
  <button onclick="logout()">Logout</button>
</div>

<div id="ownerPanel" class="hidden">
  <h2>üëë Owner Panel</h2>
  <input id="giveUser" placeholder="Username to give $"><br>
  <input id="giveAmount" type="number" placeholder="Amount"><br>
  <button onclick="giveMoney()">Give</button>
  <h3>Accounts List:</h3>
  <div id="accountList"></div>
</div>

<script>
  let users = JSON.parse(localStorage.getItem('users') || '{}');
  let currentUser = localStorage.getItem('currentUser');

  function saveUsers() {
    localStorage.setItem('users', JSON.stringify(users));
  }

  function updateMoneyDisplay() {
    if (currentUser && users[currentUser]) {
      document.getElementById('moneyDisplay').textContent = 'üí∞ Money: $' + users[currentUser].money;
    }
  }

  function login() {
    const u = loginUsername.value;
    const p = loginPassword.value;
    if (users[u] && users[u].password === p) {
      currentUser = u;
      localStorage.setItem('currentUser', currentUser);
      showMainUI();
    } else {
      alert('‚ùå Invalid credentials');
    }
  }

  function logout() {
    currentUser = null;
    localStorage.removeItem('currentUser');
    location.reload();
  }

  function createAccount() {
    const u = createUsername.value;
    const p = createPassword.value;
    if (users[u]) {
      alert('‚ùå Username already exists');
    } else {
      users[u] = { password: p, money: 0 };
      saveUsers();
      currentUser = u;
      localStorage.setItem('currentUser', u);
      showMainUI();
    }
  }

  function showMainUI() {
    document.getElementById('homeUI').classList.add('hidden');
    document.getElementById('loginUI').classList.add('hidden');
    document.getElementById('createUI').classList.add('hidden');
    document.getElementById('moneyDisplay').classList.remove('hidden');
    document.getElementById('profileBtn').classList.remove('hidden');
    updateMoneyDisplay();
  }

  function toggleProfile() {
    const p = document.getElementById('profileUI');
    const n = document.getElementById('profileName');
    n.textContent = `Username: ${currentUser}`;
    p.classList.toggle('hidden');
  }

  function toggleOwnerPanel() {
    const owner = currentUser === 'manyu';
    if (!owner) return alert('‚ùå You are not the owner');
    const panel = document.getElementById('ownerPanel');
    const list = document.getElementById('accountList');
    panel.classList.toggle('hidden');
    if (!panel.classList.contains('hidden')) {
      list.innerHTML = '';
      for (let name in users) {
        const money = users[name].money ?? 0;
        list.innerHTML += `‚Ä¢ ${name}: $${money}<br>`;
      }
    }
  }

  function giveMoney() {
    const to = document.getElementById('giveUser').value;
    const amount = parseInt(document.getElementById('giveAmount').value);
    if (!users[to]) return alert('‚ùå User not found');
    if (isNaN(amount)) return alert('‚ùå Invalid amount');
    users[to].money = (users[to].money || 0) + amount;
    saveUsers();
    updateMoneyDisplay();
    alert(`‚úÖ Gave $${amount} to ${to}`);
    toggleOwnerPanel();
    toggleOwnerPanel(); // refresh list
  }

  function showLogin() {
    document.getElementById('homeUI').classList.add('hidden');
    document.getElementById('loginUI').classList.remove('hidden');
  }

  function showCreate() {
    document.getElementById('homeUI').classList.add('hidden');
    document.getElementById('createUI').classList.remove('hidden');
  }

  function backToHome() {
    document.getElementById('loginUI').classList.add('hidden');
    document.getElementById('createUI').classList.add('hidden');
    document.getElementById('homeUI').classList.remove('hidden');
  }

  // Auto-login if saved
  if (currentUser && users[currentUser]) {
    showMainUI();
  }
</script>

</body>
</html>
