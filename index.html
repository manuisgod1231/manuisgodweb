<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡πÄ‡∏ß‡πá‡∏õ/‡πÅ‡∏≠‡∏õ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô</title>
<style>
body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; background:#f0f4f8; color:#000; }
body.dark { background:#121212; color:#fff; }
.container { max-width:720px; margin:auto; padding:20px; }
.input-row { margin:5px 0; }
.input-row input { margin-right:5px; }
button { margin-left:3px; }
h1 { font-size:20px; }
</style>
</head>
<body>
<div class="container">
  <h1 id="appTitle">üìä ‡πÄ‡∏ß‡πá‡∏õ/‡πÅ‡∏≠‡∏õ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô</h1>

  üåê <select id="langSelect" onchange="switchLang()">
    <option value="th">‡πÑ‡∏ó‡∏¢</option>
    <option value="en">English</option>
  </select>
  <button id="themeBtn" onclick="toggleDarkMode()">üåô</button>
  <br><br>

  <div id="materialsTitle">ü•¶ ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö</div>
  <div id="materials"></div>
  <button onclick="addMaterial()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö</button>
  <br><br>

  <span id="labelWorkers">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô‡∏á‡∏≤‡∏ô:</span>
  <input id="workers" type="number" value="0"><br>
  <span id="labelWage">‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á/‡∏Ñ‡∏ô:</span>
  <input id="wage" type="number" value="0"><br>
  <span id="labelWater">‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥:</span>
  <input id="water" type="number" value="0"><br>
  <span id="labelElectricity">‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü:</span>
  <input id="electricity" type="number" value="0"><br>
  <span id="labelProfit">‡∏Å‡∏≥‡πÑ‡∏£ %:</span>
  <input id="profit" type="number" value="0"><br>
  <span id="labelDuration">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:</span>
  <input id="duration" type="number" value="1">
  <select id="profitType">
    <option value="day">‡∏ß‡∏±‡∏ô</option>
    <option value="month">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</option>
    <option value="year">‡∏õ‡∏µ</option>
  </select>
  <br><br>

  <button id="calcBtn" onclick="calculate()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
  <div id="result"></div>
</div>

<script>
let materialCount=0;

const texts={
  th:{
    title:"üìä ‡πÄ‡∏ß‡πá‡∏õ/‡πÅ‡∏≠‡∏õ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô",
    materials:"ü•¶ ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö",
    workers:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô‡∏á‡∏≤‡∏ô:",
    wage:"‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á/‡∏Ñ‡∏ô:",
    water:"‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥:",
    electricity:"‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü:",
    profit:"‡∏Å‡∏≥‡πÑ‡∏£ %",
    duration:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:",
    calc:"‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì",
    matName:"‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö",
    matQty:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",
    matCost:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢",
    labor:"üíº ‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á‡∏£‡∏ß‡∏°",
    other:"üíß ‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥ + ‚ö° ‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü",
    material:"ü•¶ ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö",
    total:"üìä ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏£‡∏ß‡∏°",
    profitText:"üí∞ ‡∏Å‡∏≥‡πÑ‡∏£"
  },
  en:{
    title:"üìä Cost Calculator",
    materials:"ü•¶ Materials",
    workers:"Workers:",
    wage:"Wage/person:",
    water:"Water:",
    electricity:"Electricity:",
    profit:"Profit %",
    duration:"Amount:",
    calc:"Calculate",
    matName:"Material name",
    matQty:"Qty",
    matCost:"Cost/unit",
    labor:"üíº Labor cost",
    other:"üíß Water + ‚ö° Electricity",
    material:"ü•¶ Materials",
    total:"üìä Total cost",
    profitText:"üí∞ Profit"
  }
};

function addMaterial(name="", qty="", cost=""){
  materialCount++;
  const lang=document.getElementById("langSelect").value;
  const t=texts[lang];
  const div=document.createElement("div");
  div.className="input-row";
  div.id="material-"+materialCount;
  div.innerHTML=`
    <input type="text" placeholder="${t.matName}" value="${name}">
    <input type="number" placeholder="${t.matQty}" value="${qty}">
    <input type="number" placeholder="${t.matCost}" value="${cost}">
    <button onclick="toggleLock(${materialCount})">üîí</button>
    <button onclick="deleteMaterial(${materialCount})">‚ùå</button>
  `;
  document.getElementById("materials").appendChild(div);
}

function toggleLock(id){
  const div=document.getElementById("material-"+id);
  const inputs=div.getElementsByTagName("input");
  const lockBtn=div.getElementsByTagName("button")[0];
  const locked=inputs[0].disabled;
  for(let i=0;i<3;i++){inputs[i].disabled=!locked;}
  lockBtn.textContent=locked?"üîí":"üîì";
}

function deleteMaterial(id){
  const div=document.getElementById("material-"+id);
  if(div) div.remove();
}

function calculate(){
  const workers=parseFloat(document.getElementById("workers").value)||0;
  const wage=parseFloat(document.getElementById("wage").value)||0;
  const water=parseFloat(document.getElementById("water").value)||0;
  const electricity=parseFloat(document.getElementById("electricity").value)||0;
  const profit=parseFloat(document.getElementById("profit").value)||0;
  const duration=parseFloat(document.getElementById("duration").value)||1;
  const profitType=document.getElementById("profitType").value;

  let materialCost=0;
  document.querySelectorAll("#materials .input-row").forEach(row=>{
    const qty=parseFloat(row.children[1].value)||0;
    const cost=parseFloat(row.children[2].value)||0;
    materialCost+=qty*cost;
  });

  const laborCost=workers*wage;
  const otherCost=water+electricity;
  const totalCost=laborCost+otherCost+materialCost;

  let profitTotal=0;
  if(profit>0 && materialCost>0){
    profitTotal=totalCost*(profit/100)*duration;
  }

  let profitLabel="";
  if(profitTotal>0){
    if(profitType==="day") profitLabel=`üí∞ ‡∏Å‡∏≥‡πÑ‡∏£: ${profitTotal} ‡∏ö‡∏≤‡∏ó / ${duration} ‡∏ß‡∏±‡∏ô`;
    if(profitType==="month") profitLabel=`üí∞ ‡∏Å‡∏≥‡πÑ‡∏£: ${profitTotal} ‡∏ö‡∏≤‡∏ó / ${duration} ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô`;
    if(profitType==="year") profitLabel=`üí∞ ‡∏Å‡∏≥‡πÑ‡∏£: ${profitTotal} ‡∏ö‡∏≤‡∏ó / ${duration} ‡∏õ‡∏µ`;
  }

  const lang=document.getElementById("langSelect").value;
  const t=texts[lang];

  document.getElementById("result").innerHTML=`
    ${t.labor}: ${laborCost} ‡∏ö‡∏≤‡∏ó<br>
    ${t.other}: ${otherCost} ‡∏ö‡∏≤‡∏ó<br>
    ${t.material}: ${materialCost} ‡∏ö‡∏≤‡∏ó<br>
    ${t.total}: ${totalCost} ‡∏ö‡∏≤‡∏ó<br>
    ${profitLabel}
  `;
}

function switchLang(){
  const lang=document.getElementById("langSelect").value;
  const t=texts[lang];
  document.getElementById("appTitle").textContent=t.title;
  document.getElementById("materialsTitle").textContent=t.materials;
  document.getElementById("labelWorkers").textContent=t.workers;
  document.getElementById("labelWage").textContent=t.wage;
  document.getElementById("labelWater").textContent=t.water;
  document.getElementById("labelElectricity").textContent=t.electricity;
  document.getElementById("labelProfit").textContent=t.profit;
  document.getElementById("labelDuration").textContent=t.duration;
  document.getElementById("calcBtn").textContent=t.calc;
  document.querySelectorAll("#materials .input-row").forEach(row=>{
    row.children[0].placeholder=t.matName;
    row.children[1].placeholder=t.matQty;
    row.children[2].placeholder=t.matCost;
  });
}

function toggleDarkMode(){
  const body=document.body;
  const btn=document.getElementById("themeBtn");
  body.classList.toggle("dark");
  btn.textContent = body.classList.contains("dark")?"‚òÄÔ∏è":"üåô";
}
</script>
</body>
</html>
